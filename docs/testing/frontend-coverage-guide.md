# ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚«ãƒãƒ¬ãƒƒã‚¸ã‚¬ã‚¤ãƒ‰ï¼ˆVitest + @vitest/coverage-v8ï¼‰

## æ¦‚è¦

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã¯ã€Vitest ã¨ @vitest/coverage-v8 ã‚’ä½¿ã£ãŸãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼ˆReact + TypeScriptï¼‰ã‚³ãƒ¼ãƒ‰ã®ã‚«ãƒãƒ¬ãƒƒã‚¸æ¸¬å®šæ–¹æ³•ã¨ã€ãƒ¬ãƒãƒ¼ãƒˆã®è¦‹æ–¹ã‚’è§£èª¬ã—ã¾ã™ã€‚

**å¯¾è±¡**: React + TypeScript ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚³ãƒ¼ãƒ‰ï¼ˆfrontend/src/ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼‰

**ãƒ„ãƒ¼ãƒ«**: Vitest + @vitest/coverage-v8

**å®Ÿè¡Œæ™‚é–“**: ç´„2.8ç§’ï¼ˆé€šå¸¸ãƒ†ã‚¹ãƒˆã¨ã»ã¼åŒã˜ï¼‰

---

## 1. å®Ÿè¡Œæ–¹æ³•

### åŸºæœ¬çš„ãªå®Ÿè¡Œ

```bash
cd frontend

# ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆä»˜ããƒ†ã‚¹ãƒˆå®Ÿè¡Œ
npm run test:coverage

# ã‚«ãƒãƒ¬ãƒƒã‚¸ + UI ãƒ¢ãƒ¼ãƒ‰
npm run test:coverage:ui
```

### é€šå¸¸ãƒ†ã‚¹ãƒˆã¨ã®é•ã„

```bash
# é€šå¸¸ã®ãƒ†ã‚¹ãƒˆï¼ˆã‚«ãƒãƒ¬ãƒƒã‚¸ãªã—ï¼‰
npm test              # Watch ãƒ¢ãƒ¼ãƒ‰
npm run test:run      # 1å›ã®ã¿å®Ÿè¡Œ

# ã‚«ãƒãƒ¬ãƒƒã‚¸ä»˜ããƒ†ã‚¹ãƒˆ
npm run test:coverage # ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
```

---

## 2. ãƒ¬ãƒãƒ¼ãƒˆã®æ§‹é€ 

### ç”Ÿæˆã•ã‚Œã‚‹ãƒ•ã‚¡ã‚¤ãƒ«

```
frontend/coverage/
â”œâ”€â”€ index.html                    â† ãƒ¡ã‚¤ãƒ³ãƒ¬ãƒãƒ¼ãƒˆï¼ˆâ˜…ã“ã“ã‹ã‚‰é–‹å§‹ï¼‰
â”œâ”€â”€ coverage-summary.json         â† JSON ã‚µãƒãƒªãƒ¼ï¼ˆãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§èª­ã‚ã‚‹ï¼‰
â”œâ”€â”€ base.css, prettify.css        â† ã‚¹ã‚¿ã‚¤ãƒ«ã‚·ãƒ¼ãƒˆ
â”œâ”€â”€ prettify.js, sorter.js        â† JavaScript
â””â”€â”€ src/                          â† ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰åˆ¥ã®è©³ç´°ãƒ¬ãƒãƒ¼ãƒˆ
    â”œâ”€â”€ api/
    â”‚   â”œâ”€â”€ index.html
    â”‚   â”œâ”€â”€ auth.ts.html
    â”‚   â””â”€â”€ ...
    â”œâ”€â”€ components/
    â”œâ”€â”€ hooks/
    â”œâ”€â”€ pages/
    â””â”€â”€ ...
```

### ãƒ¬ãƒãƒ¼ãƒˆã‚’é–‹ã

```bash
# macOS
open coverage/index.html

# Linux
xdg-open coverage/index.html

# Windows
start coverage/index.html
```

---

## 3. index.html ã®è¦‹æ–¹

### ç”»é¢æ§‹æˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  All files                        33.27% Statements            â”‚
â”‚                                   86.4%  Branches              â”‚
â”‚                                   48.93% Functions             â”‚
â”‚                                   33.27% Lines                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  File               â”‚ %Stmtsâ”‚ %Branchâ”‚ %Funcsâ”‚ %Linesâ”‚ Uncov. â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  src/               â”‚       â”‚        â”‚       â”‚       â”‚        â”‚
â”‚  â””â”€ App.tsx         â”‚   0   â”‚   0    â”‚   0   â”‚   0   â”‚ 1-50   â”‚
â”‚  src/components/    â”‚       â”‚        â”‚       â”‚       â”‚        â”‚
â”‚  â””â”€ Header.tsx      â”‚  100  â”‚  100   â”‚  100  â”‚  100  â”‚        â”‚ â† å®Œç’§
â”‚  src/hooks/         â”‚       â”‚        â”‚       â”‚       â”‚        â”‚
â”‚  â””â”€ useAuth.tsx     â”‚ 96.51 â”‚ 86.36  â”‚  100  â”‚ 96.51 â”‚ 80,... â”‚ â† é«˜ã‚«ãƒãƒ¬ãƒƒã‚¸
â”‚  src/pages/         â”‚       â”‚        â”‚       â”‚       â”‚        â”‚
â”‚  â”œâ”€ LoginPage.tsx   â”‚ 99.23 â”‚  100   â”‚  100  â”‚ 99.23 â”‚ 59     â”‚ â† ã»ã¼å®Œç’§
â”‚  â”œâ”€ RegisterPage... â”‚ 98.79 â”‚ 96.55  â”‚  100  â”‚ 98.79 â”‚ 32-33  â”‚ â† ã»ã¼å®Œç’§
â”‚  â””â”€ Dashboard...    â”‚   0   â”‚   0    â”‚   0   â”‚   0   â”‚ 1-238  â”‚ â† æœªãƒ†ã‚¹ãƒˆ
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4ã¤ã®æŒ‡æ¨™ã®æ„å‘³

| æŒ‡æ¨™ | è‹±èªå | æ„å‘³ | é‡è¦åº¦ |
|------|--------|------|--------|
| **% Stmts** | Statements | å®Ÿè¡Œã•ã‚ŒãŸæ–‡ã®å‰²åˆ | â­â­â­ |
| **% Branch** | Branches | å®Ÿè¡Œã•ã‚ŒãŸåˆ†å²ã®å‰²åˆ | â­â­â­â­â­ |
| **% Funcs** | Functions | å‘¼ã³å‡ºã•ã‚ŒãŸé–¢æ•°ã®å‰²åˆ | â­â­ |
| **% Lines** | Lines | å®Ÿè¡Œã•ã‚ŒãŸè¡Œã®å‰²åˆ | â­â­â­ |

**Branch ã‚«ãƒãƒ¬ãƒƒã‚¸ãŒæœ€ã‚‚é‡è¦**: ã™ã¹ã¦ã®åˆ†å²ï¼ˆif/else, switch ãªã©ï¼‰ãŒãƒ†ã‚¹ãƒˆã•ã‚Œã¦ã„ã‚‹ã‹ã‚’ç¤ºã—ã¾ã™ã€‚

---

## 4. å€‹åˆ¥ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ¬ãƒãƒ¼ãƒˆã®è¦‹æ–¹

### ãƒ•ã‚¡ã‚¤ãƒ«ãƒªãƒ³ã‚¯ã‚’ã‚¯ãƒªãƒƒã‚¯

`index.html` ã§ãƒ•ã‚¡ã‚¤ãƒ«åï¼ˆä¾‹: `LoginPage.tsx`ï¼‰ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã€ãã®ãƒ•ã‚¡ã‚¤ãƒ«ã®è©³ç´°ãƒ¬ãƒãƒ¼ãƒˆãŒé–‹ãã¾ã™ã€‚

### è‰²åˆ†ã‘ã®æ„å‘³

| èƒŒæ™¯è‰² | æ„å‘³ | å®Ÿè¡Œå›æ•° |
|--------|------|----------|
| ğŸŸ¢ **ç·‘** | å®Ÿè¡Œã•ã‚ŒãŸ | 1å›ä»¥ä¸Š |
| ğŸŸ¡ **é»„è‰²** | éƒ¨åˆ†çš„ã«å®Ÿè¡Œ | åˆ†å²ã®ä¸€éƒ¨ã®ã¿ |
| ğŸ”´ **èµ¤** | å®Ÿè¡Œã•ã‚Œãªã‹ã£ãŸ | 0å› |
| âšª **ç™½** | ã‚«ãƒãƒ¬ãƒƒã‚¸å¯¾è±¡å¤– | ã‚¤ãƒ³ãƒãƒ¼ãƒˆã€å‹å®šç¾©ãªã© |

### è¡Œç•ªå·ã®æ¨ªã®æ•°å­—

```
5x â”‚  const [user, setUser] = useState<User | null>(null)
3x â”‚  const [loading, setLoading] = useState(true)
0x â”‚  const handleError = () => { ... }
   â”‚
```

- `5x`: ã“ã®è¡ŒãŒ5å›å®Ÿè¡Œã•ã‚ŒãŸ
- `3x`: ã“ã®è¡ŒãŒ3å›å®Ÿè¡Œã•ã‚ŒãŸ
- `0x`: ã“ã®è¡ŒãŒå®Ÿè¡Œã•ã‚Œãªã‹ã£ãŸï¼ˆèµ¤ã§è¡¨ç¤ºï¼‰

### å®Ÿä¾‹

```typescript
1  â”‚ export const LoginPage = () => {
5x â”‚   const [username, setUsername] = useState('')
5x â”‚   const [password, setPassword] = useState('')
5x â”‚   const navigate = useNavigate()
   â”‚
5x â”‚   const handleSubmit = async (e: FormEvent) => {
3x â”‚     e.preventDefault()
3x â”‚     try {
2x â”‚       await login(username, password)
2x â”‚       navigate('/dashboard')
   â”‚     } catch (error) {
1x â”‚       setError(error.message)
   â”‚     }
   â”‚   }
   â”‚
   â”‚   return (
5x â”‚     <form onSubmit={handleSubmit}>
   â”‚       ...
   â”‚     </form>
   â”‚   )
   â”‚ }
```

**è§£é‡ˆ**:
- ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯5å›ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚ŒãŸ
- ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡ã¯3å›ãƒ†ã‚¹ãƒˆã•ã‚ŒãŸ
- æˆåŠŸã‚±ãƒ¼ã‚¹: 2å›
- ã‚¨ãƒ©ãƒ¼ã‚±ãƒ¼ã‚¹: 1å›

---

## 5. ã‚«ãƒãƒ¬ãƒƒã‚¸é–¾å€¤

### ç¾åœ¨ã®è¨­å®š

`frontend/vitest.config.ts` ã§è¨­å®šã•ã‚Œã¦ã„ã¾ã™:

```typescript
coverage: {
  thresholds: {
    lines: 30,      // 30%ä»¥ä¸Š
    functions: 45,  // 45%ä»¥ä¸Š
    branches: 85,   // 85%ä»¥ä¸Š
    statements: 30, // 30%ä»¥ä¸Š
  },
}
```

### å®Ÿéš›ã®ã‚«ãƒãƒ¬ãƒƒã‚¸

| æŒ‡æ¨™ | é–¾å€¤ | å®Ÿéš› | åˆ¤å®š |
|------|------|------|------|
| Lines | 30% | 33.27% | âœ… +3.27% |
| Functions | 45% | 48.93% | âœ… +3.93% |
| Branches | 85% | 86.4% | âœ… +1.4% |
| Statements | 30% | 33.27% | âœ… +3.27% |

**ã™ã¹ã¦ã®é–¾å€¤ã‚’ã‚¯ãƒªã‚¢ã—ã¦ã„ã¾ã™ï¼**

### é–¾å€¤ã‚’è¶…ãˆãªã„ã¨ã©ã†ãªã‚‹ï¼Ÿ

```bash
$ npm run test:coverage

ERROR: Coverage for lines (28.5%) does not meet threshold (30%)
```

ãƒ†ã‚¹ãƒˆãŒå¤±æ•—ã—ã€CI/CD ã‚‚å¤±æ•—ã—ã¾ã™ã€‚

---

## 6. ã‚«ãƒãƒ¬ãƒƒã‚¸ã®è§£é‡ˆ

### é«˜ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ80%ä»¥ä¸Šï¼‰

```
src/components/Header.tsx:    100%
src/pages/LoginPage.tsx:      99.23%
src/pages/RegisterPage.tsx:   98.79%
src/hooks/useAuth.tsx:        96.51%
src/contexts/ToastContext:    86.36%
```

**æ„å‘³**: ã“ã‚Œã‚‰ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯ã—ã£ã‹ã‚Šãƒ†ã‚¹ãƒˆã•ã‚Œã¦ã„ã‚‹

**ç†ç”±**:
- èªè¨¼ãƒ•ãƒ­ãƒ¼ãŒé‡è¦ãªãŸã‚ã€è©³ç´°ã«ãƒ†ã‚¹ãƒˆã•ã‚Œã¦ã„ã‚‹
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã«ç›´çµã™ã‚‹éƒ¨åˆ†
- ãƒã‚°ãŒã‚ã‚‹ã¨è‡´å‘½çš„

### ä½ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ50%æœªæº€ï¼‰

```
src/pages/CreatePostPage.tsx:  0%
src/pages/DashboardPage.tsx:   0%
src/pages/EditPostPage.tsx:    0%
src/api/posts.ts:              0%
src/components/Toast/*.tsx:    0%
```

**æ„å‘³**: ã“ã‚Œã‚‰ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯ãƒ†ã‚¹ãƒˆã•ã‚Œã¦ã„ãªã„

**ç†ç”±**:
- ã¾ã ãƒ†ã‚¹ãƒˆã‚’æ›¸ã„ã¦ã„ãªã„
- å®Ÿè£…ãŒæœ€è¿‘è¿½åŠ ã•ã‚ŒãŸ
- å„ªå…ˆåº¦ãŒä½ã„

**å¯¾å¿œ**:
1. é‡è¦åº¦ã®é«˜ã„é †ã«ãƒ†ã‚¹ãƒˆã‚’è¿½åŠ 
2. ã¾ãšã¯ CreatePostPage, EditPostPage ã‹ã‚‰
3. Toast ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯å¾Œå›ã—ã§ã‚‚ OK

### Branch ã‚«ãƒãƒ¬ãƒƒã‚¸ãŒé«˜ã„ç†ç”±ï¼ˆ86.4%ï¼‰

```typescript
// ä¾‹: ã™ã¹ã¦ã®åˆ†å²ãŒãƒ†ã‚¹ãƒˆã•ã‚Œã¦ã„ã‚‹
if (user) {           // â† ãƒ†ã‚¹ãƒˆæ¸ˆã¿ï¼ˆuser ãŒã„ã‚‹å ´åˆï¼‰
  return <Dashboard />
} else {              // â† ãƒ†ã‚¹ãƒˆæ¸ˆã¿ï¼ˆuser ãŒã„ãªã„å ´åˆï¼‰
  return <Login />
}
```

**æ„å‘³**: ãƒ†ã‚¹ãƒˆæ¸ˆã¿ã‚³ãƒ¼ãƒ‰ã®åˆ†å²ãŒç¶²ç¾…çš„ã«ãƒ†ã‚¹ãƒˆã•ã‚Œã¦ã„ã‚‹

---

## 7. JSON ã‚µãƒãƒªãƒ¼ã®ä½¿ã„æ–¹

### ãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ 

`coverage/coverage-summary.json` ã«ã¯æ©Ÿæ¢°èª­ã¿å–ã‚Šå¯èƒ½ãªå½¢å¼ã§ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ‡ãƒ¼ã‚¿ãŒæ ¼ç´ã•ã‚Œã¦ã„ã¾ã™ã€‚

```json
{
  "total": {
    "lines": {"total": 1608, "covered": 535, "pct": 33.27},
    "statements": {"total": 1608, "covered": 535, "pct": 33.27},
    "functions": {"total": 47, "covered": 23, "pct": 48.93},
    "branches": {"total": 103, "covered": 89, "pct": 86.4}
  },
  "/path/to/file.tsx": {
    "lines": {...},
    "statements": {...},
    "functions": {...},
    "branches": {...}
  }
}
```

### ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§èª­ã‚€

```bash
# å…¨ä½“ã®ã‚«ãƒãƒ¬ãƒƒã‚¸ã‚’å–å¾—
cat coverage/coverage-summary.json | jq '.total'

# ã‚«ãƒãƒ¬ãƒƒã‚¸ãŒ50%æœªæº€ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŠ½å‡º
cat coverage/coverage-summary.json | \
  jq 'to_entries | map(select(.value.lines.pct < 50)) | map(.key)'

# æœ€ã‚‚ã‚«ãƒãƒ¬ãƒƒã‚¸ãŒä½ã„ãƒ•ã‚¡ã‚¤ãƒ«Top 5
cat coverage/coverage-summary.json | \
  jq -r 'to_entries |
         map({file: .key, pct: .value.lines.pct}) |
         sort_by(.pct) |
         .[:5] |
         .[] | "\(.pct)%\t\(.file)"'
```

---

## 8. ã‚«ãƒãƒ¬ãƒƒã‚¸å‘ä¸Šã®ã‚³ãƒ„

### å„ªå…ˆåº¦ã®ä»˜ã‘æ–¹

**é«˜å„ªå…ˆåº¦**:
1. ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ãŒè¤‡é›‘ãªã‚³ãƒ¼ãƒ‰
2. ãƒã‚°ãŒç™ºç”Ÿã—ã‚„ã™ã„ã‚³ãƒ¼ãƒ‰
3. ãƒ¦ãƒ¼ã‚¶ãƒ¼å½±éŸ¿ãŒå¤§ãã„ã‚³ãƒ¼ãƒ‰

**ä½å„ªå…ˆåº¦**:
1. è‡ªå‹•ç”Ÿæˆã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰
2. ã‚·ãƒ³ãƒ—ãƒ«ãªè¡¨ç¤ºã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
3. å‹å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«

### æœªã‚«ãƒãƒ¼ã®ã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã¤ã‘ã‚‹

```bash
# HTMLãƒ¬ãƒãƒ¼ãƒˆã§èµ¤ã„è¡Œã‚’æ¢ã™
open coverage/index.html

# ã‚«ãƒãƒ¬ãƒƒã‚¸ãŒä½ã„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç‰¹å®š
# â†’ ãã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ã
# â†’ èµ¤ã„è¡Œã‚’è¦‹ã‚‹
# â†’ ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’è¿½åŠ 
```

### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹è¿½åŠ ã®ä¾‹

**Beforeï¼ˆã‚«ãƒãƒ¬ãƒƒã‚¸ 50%ï¼‰:**
```typescript
it('should login successfully', async () => {
  await login('user', 'pass')
  expect(mockNavigate).toHaveBeenCalledWith('/dashboard')
})
```

**Afterï¼ˆã‚«ãƒãƒ¬ãƒƒã‚¸ 85%ï¼‰:**
```typescript
it('should login successfully', async () => {
  await login('user', 'pass')
  expect(mockNavigate).toHaveBeenCalledWith('/dashboard')
})

// ã‚¨ãƒ©ãƒ¼ã‚±ãƒ¼ã‚¹ã‚’è¿½åŠ 
it('should show error message on login failure', async () => {
  mockLogin.mockRejectedValue(new Error('Invalid credentials'))
  await login('user', 'wrong')
  expect(screen.getByText('Invalid credentials')).toBeInTheDocument()
})

// ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ã‚’è¿½åŠ 
it('should disable submit button during login', async () => {
  const button = screen.getByRole('button', { name: 'Login' })
  fireEvent.click(button)
  expect(button).toBeDisabled()
})
```

---

## 9. ã‚ˆãã‚ã‚‹è³ªå•

### Q1. ãªãœãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã¨é•ã£ã¦é€Ÿã„ã®ã§ã™ã‹ï¼Ÿ

**A**: V8 ã‚¨ãƒ³ã‚¸ãƒ³ãƒ™ãƒ¼ã‚¹ã®ã‚«ãƒãƒ¬ãƒƒã‚¸ã¯ã€å®Ÿè¡Œæ™‚ã®ã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰ãŒéå¸¸ã«å°ã•ã„ãŸã‚ã§ã™ã€‚

- ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼ˆsb-coverï¼‰: å„å¼ã«è¨ˆæ¸¬ã‚³ãƒ¼ãƒ‰ã‚’æŒ¿å…¥ â†’ é…ã„
- ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼ˆV8ï¼‰: V8 ã‚¨ãƒ³ã‚¸ãƒ³ãŒãƒã‚¤ãƒ†ã‚£ãƒ–ã§è¨ˆæ¸¬ â†’ é€Ÿã„

### Q2. CI/CD ã§å®Ÿè¡Œã™ã¹ãã§ã™ã‹ï¼Ÿ

**A**: ç¾åœ¨ã¯å®Ÿè¡Œã—ã¦ã„ã¾ã›ã‚“ãŒã€è¿½åŠ ã¯å¯èƒ½ã§ã™ã€‚

**ãƒ¡ãƒªãƒƒãƒˆ**:
- PRã”ã¨ã«ã‚«ãƒãƒ¬ãƒƒã‚¸å¤‰åŒ–ã‚’ç¢ºèªã§ãã‚‹
- å¾Œé€€ã‚’é˜²ã’ã‚‹

**ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ**:
- å®Ÿè¡Œæ™‚é–“ãŒ5-10ç§’å¢—åŠ 
- ã‚«ãƒãƒ¬ãƒƒã‚¸ãŒé–¾å€¤ã‚’ä¸‹å›ã‚‹ã¨CIãŒå¤±æ•—ã™ã‚‹

**æ¨å¥¨**: ãƒ­ãƒ¼ã‚«ãƒ«ã§é–‹ç™ºæ™‚ã«å®Ÿè¡Œã—ã€ãƒªãƒªãƒ¼ã‚¹å‰ã«ç¢ºèª

### Q3. 100%ã‚’ç›®æŒ‡ã™ã¹ãã§ã™ã‹ï¼Ÿ

**A**: ã„ã„ãˆã€‚80%ç¨‹åº¦ãŒç¾å®Ÿçš„ãªç›®æ¨™ã§ã™ã€‚

**ç†ç”±**:
- 100%é”æˆã®ã‚³ã‚¹ãƒˆãŒé«˜ã„
- äº›ç´°ãªã‚³ãƒ¼ãƒ‰ã®ãƒ†ã‚¹ãƒˆã«æ™‚é–“ã‚’å–ã‚‰ã‚Œã‚‹
- é‡è¦ãªã®ã¯ã€Œé‡è¦ãªéƒ¨åˆ†ãŒãƒ†ã‚¹ãƒˆã•ã‚Œã¦ã„ã‚‹ã‹ã€

**ç¾å®Ÿçš„ãªç›®æ¨™**:
- Lines: 50-60%
- Functions: 60-70%
- Branches: 85-90%ï¼ˆé‡è¦ï¼ï¼‰
- Statements: 50-60%

### Q4. ã‚«ãƒãƒ¬ãƒƒã‚¸ãŒé«˜ã„ = å“è³ªãŒé«˜ã„ï¼Ÿ

**A**: å¿…ãšã—ã‚‚ãã†ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

**ã‚«ãƒãƒ¬ãƒƒã‚¸ãŒé«˜ãã¦ã‚‚ãƒã‚°ãŒã‚ã‚‹ä¾‹**:
```typescript
// ã‚«ãƒãƒ¬ãƒƒã‚¸ 100% ã ãŒãƒã‚°ãŒã‚ã‚‹
it('should add numbers', () => {
  const result = add(2, 3)
  expect(result).toBeDefined() // â† ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ãŒç”˜ã„
})

// å®Ÿéš›ã®å®Ÿè£…
function add(a: number, b: number) {
  return a - b // â† ãƒã‚°ï¼ˆæ¸›ç®—ã«ãªã£ã¦ã„ã‚‹ï¼‰
}
```

**é‡è¦ãªã®ã¯**:
- ã‚«ãƒãƒ¬ãƒƒã‚¸ï¼ˆå®Ÿè¡Œã•ã‚ŒãŸã‹ï¼‰
- ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆæ­£ã—ãå‹•ä½œã™ã‚‹ã‹ï¼‰
- ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ï¼ˆå¢ƒç•Œæ¡ä»¶ã¯ï¼Ÿï¼‰

---

## 10. ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### å•é¡Œ: ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆãŒç”Ÿæˆã•ã‚Œãªã„

**åŸå› **: ãƒ†ã‚¹ãƒˆãŒå¤±æ•—ã—ã¦ã„ã‚‹

**è§£æ±ºæ–¹æ³•**:
```bash
npm test  # é€šå¸¸ã®ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ã¦ã‚¨ãƒ©ãƒ¼ã‚’ç¢ºèª
```

### å•é¡Œ: ã‚«ãƒãƒ¬ãƒƒã‚¸ãŒé–¾å€¤ã‚’ä¸‹å›ã‚‹

**åŸå› **: æ–°ã—ã„ã‚³ãƒ¼ãƒ‰ã‚’è¿½åŠ ã—ãŸãŒãƒ†ã‚¹ãƒˆã‚’æ›¸ã„ã¦ã„ãªã„

**è§£æ±ºæ–¹æ³•**:
```bash
# é–¾å€¤ã‚’ä¸€æ™‚çš„ã«ä¸‹ã’ã‚‹ï¼ˆvitest.config.tsï¼‰
thresholds: {
  lines: 25,  # 30 ã‹ã‚‰ 25 ã«ä¸‹ã’ã‚‹
}

# ã¾ãŸã¯ã€ãƒ†ã‚¹ãƒˆã‚’è¿½åŠ ã™ã‚‹ï¼ˆæ¨å¥¨ï¼‰
```

### å•é¡Œ: `coverage/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒ Git ã«å«ã¾ã‚Œã‚‹

**åŸå› **: `.gitignore` ãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ãªã„

**è§£æ±ºæ–¹æ³•**:
```bash
# .gitignore ã«è¿½åŠ 
echo "coverage/" >> frontend/.gitignore

# ã™ã§ã«è¿½è·¡ã•ã‚Œã¦ã„ã‚‹å ´åˆã¯å‰Šé™¤
git rm -r --cached frontend/coverage/
```

### å•é¡Œ: ç‰¹å®šã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚«ãƒãƒ¬ãƒƒã‚¸ã‹ã‚‰é™¤å¤–ã—ãŸã„

**è§£æ±ºæ–¹æ³•**: `vitest.config.ts` ã® `exclude` ã«è¿½åŠ 
```typescript
coverage: {
  exclude: [
    'src/**/*.test.{ts,tsx}',
    'src/test/**',
    'src/mockData/**',  // â† è¿½åŠ 
  ],
}
```

---

## 11. å‚è€ƒè³‡æ–™

### Vitest å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [Vitest Coverage](https://vitest.dev/guide/coverage.html)
- [Vitest Configuration](https://vitest.dev/config/)

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ã®é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«

- `frontend/vitest.config.ts`: ã‚«ãƒãƒ¬ãƒƒã‚¸è¨­å®š
- `frontend/package.json`: ã‚¹ã‚¯ãƒªãƒ—ãƒˆå®šç¾©
- `frontend/.gitignore`: ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆã®é™¤å¤–è¨­å®š

### é–¢é€£ã‚³ãƒãƒ³ãƒ‰

```bash
# é€šå¸¸ã®ãƒ†ã‚¹ãƒˆ
npm test              # Watch ãƒ¢ãƒ¼ãƒ‰
npm run test:run      # 1å›ã®ã¿å®Ÿè¡Œ
npm run test:ui       # UI ãƒ¢ãƒ¼ãƒ‰

# ã‚«ãƒãƒ¬ãƒƒã‚¸ä»˜ã
npm run test:coverage    # ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
npm run test:coverage:ui # ã‚«ãƒãƒ¬ãƒƒã‚¸ + UI

# ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆã®å‰Šé™¤
rm -rf coverage/
```

---

## ã¾ã¨ã‚

- **å®Ÿè¡Œ**: `npm run test:coverage`
- **ãƒ¬ãƒãƒ¼ãƒˆ**: `frontend/coverage/index.html`
- **ç¾åœ¨**: Lines 33.27%, Branches 86.4%
- **ç›®æ¨™**: Lines 50%, Branches 85%
- **é »åº¦**: é–‹ç™ºæ™‚ã«å®šæœŸçš„ã«å®Ÿè¡Œ
- **æ³¨æ„**: æ•°å€¤ã ã‘ã§ãªãã€é‡è¦ãªéƒ¨åˆ†ãŒãƒ†ã‚¹ãƒˆã•ã‚Œã¦ã„ã‚‹ã‹ã‚’ç¢ºèª

ã‚«ãƒãƒ¬ãƒƒã‚¸ã¯å“è³ªæ”¹å–„ã®ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚100%ã‚’ç›®æŒ‡ã™ã®ã§ã¯ãªãã€é‡è¦ãªãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã¨ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãŒç¢ºå®Ÿã«ãƒ†ã‚¹ãƒˆã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’å„ªå…ˆã—ã¾ã—ã‚‡ã†ã€‚
