# Common Lisp Blog System

Common Lisp (SBCL)ã€Caveman2ã€Mitoã€PostgreSQLã€Redisã€React 18ã€TypeScriptã‚’ä½¿ç”¨ã—ãŸãƒ¢ãƒ€ãƒ³ãªãƒ–ãƒ­ã‚°ã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚

![License](https://img.shields.io/badge/license-MIT-blue.svg)
![Common Lisp](https://img.shields.io/badge/Common%20Lisp-SBCL-green.svg)
![PostgreSQL](https://img.shields.io/badge/PostgreSQL-15-blue.svg)
![React](https://img.shields.io/badge/React-18-blue.svg)
![TypeScript](https://img.shields.io/badge/TypeScript-5-blue.svg)

## ç‰¹å¾´

- ğŸ” å®Œå…¨ãªèªè¨¼ã‚·ã‚¹ãƒ†ãƒ ï¼ˆç™»éŒ²ã€ãƒ­ã‚°ã‚¤ãƒ³ã€ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ï¼‰
- ğŸ“ æŠ•ç¨¿ã®CRUDæ“ä½œï¼ˆä½œæˆã€èª­ã¿å–ã‚Šã€æ›´æ–°ã€å‰Šé™¤ï¼‰
- ğŸ“„ ä¸‹æ›¸ãæ©Ÿèƒ½ï¼ˆå…¬é–‹/éå…¬é–‹ã®åˆ‡ã‚Šæ›¿ãˆï¼‰
- âš›ï¸ React 18ã«ã‚ˆã‚‹æœ€æ–°ã®ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
- ğŸ”· TypeScriptã«ã‚ˆã‚‹å‹å®‰å…¨ãªé–‹ç™º
- ğŸ¨ Tailwind CSSã«ã‚ˆã‚‹ãƒ¢ãƒ€ãƒ³ãªãƒ‡ã‚¶ã‚¤ãƒ³
- ğŸ—„ï¸ PostgreSQLã«ã‚ˆã‚‹å …ç‰¢ãªãƒ‡ãƒ¼ã‚¿ç®¡ç†
- ğŸš€ Redisã«ã‚ˆã‚‹é«˜é€Ÿã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†
- âœ… 307ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ï¼ˆ100%æˆåŠŸç‡ï¼‰
- âš¡ Common Lispã«ã‚ˆã‚‹é«˜é€Ÿãªãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
- **Common Lisp**: SBCL 2.5.9+
- **Webãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**: Caveman2
- **ORM**: Mitoï¼ˆã‚³ãƒã‚¯ã‚·ãƒ§ãƒ³ãƒ—ãƒ¼ãƒªãƒ³ã‚°ä»˜ãï¼‰
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: PostgreSQL 15+
- **ã‚»ãƒƒã‚·ãƒ§ãƒ³**: Redis 7+
- **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£**: PBKDF2ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒãƒƒã‚·ãƒ¥åŒ–ï¼ˆ100,000å›åå¾©ï¼‰
- **ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**: FiveAM

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼ˆPhase 5 - å®Ÿè£…äºˆå®šï¼‰
- **ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**: React 18
- **è¨€èª**: TypeScript 5
- **ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«**: Vite
- **ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°**: React Router v6
- **çŠ¶æ…‹ç®¡ç†**: TanStack Query (React Query)
- **ãƒ•ã‚©ãƒ¼ãƒ **: React Hook Form
- **ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°**: Tailwind CSS
- **ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³**: React Markdown

## å¿…è¦è¦ä»¶

- SBCL 2.5.9ä»¥ä¸Š
- PostgreSQL 15ä»¥ä¸Š
- Redis 7ä»¥ä¸Š
- Node.js 18ä»¥ä¸Šï¼ˆãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰é–‹ç™ºæ™‚ï¼‰
- Roswellï¼ˆæ¨å¥¨ï¼‰
- Quicklisp

---

## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ‰‹é †

### macOS

#### 1. Homebrewã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆæœªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã®å ´åˆï¼‰

```bash
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
```

#### 2. å¿…è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
# SBCLã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
brew install sbcl

# Roswellã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
brew install roswell

# PostgreSQLã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
brew install postgresql@15

# Redisã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
brew install redis

# PostgreSQLã®èµ·å‹•
brew services start postgresql@15

# Redisã®èµ·å‹•
brew services start redis

# Node.js ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰é–‹ç™ºæ™‚ï¼‰
brew install node
```

#### 3. Quicklispã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
ros install quicklisp
```

ã¾ãŸã¯æ‰‹å‹•ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼š

```bash
curl -O https://beta.quicklisp.org/quicklisp.lisp
sbcl --load quicklisp.lisp \
     --eval "(quicklisp-quickstart:install)" \
     --eval "(ql:add-to-init-file)" \
     --quit
```

#### 4. PostgreSQLã®è¨­å®š

```bash
# æœ¬ç•ªç”¨ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ä½œæˆ
createdb blogdb

# ãƒ†ã‚¹ãƒˆç”¨ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ä½œæˆ
createdb lisp_blog_test

# ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ä½œæˆï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
createuser bloguser

# ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰è¨­å®šãŒå¿…è¦ãªå ´åˆ
psql blogdb
# psqlå†…ã§å®Ÿè¡Œ:
# ALTER USER bloguser WITH PASSWORD 'your_password';
# GRANT ALL PRIVILEGES ON DATABASE blogdb TO bloguser;
# GRANT ALL PRIVILEGES ON DATABASE lisp_blog_test TO bloguser;
# \q
```

---

### Ubuntu

#### 1. ã‚·ã‚¹ãƒ†ãƒ ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®æ›´æ–°

```bash
sudo apt update && sudo apt upgrade -y
```

#### 2. å¿…è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
# SBCLã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
sudo apt install -y sbcl

# ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
sudo apt install -y curl build-essential automake autoconf git

# PostgreSQLã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
sudo apt install -y postgresql postgresql-contrib

# Redisã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
sudo apt install -y redis-server

# Node.jsã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰é–‹ç™ºæ™‚ï¼‰
curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
sudo apt install -y nodejs

# PostgreSQLã®èµ·å‹•ã¨è‡ªå‹•èµ·å‹•è¨­å®š
sudo systemctl start postgresql
sudo systemctl enable postgresql

# Redisã®èµ·å‹•ã¨è‡ªå‹•èµ·å‹•è¨­å®š
sudo systemctl start redis-server
sudo systemctl enable redis-server
```

#### 3. Roswellã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
# Roswellã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
curl -L https://raw.githubusercontent.com/roswell/roswell/master/scripts/install-for-ci.sh | sh

# ãƒ‘ã‚¹ã®è¨­å®š
echo 'export PATH="$HOME/.roswell/bin:$PATH"' >> ~/.bashrc
source ~/.bashrc

# Quicklispã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
ros install quicklisp
```

ã¾ãŸã¯æ‰‹å‹•ã§Quicklispã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼š

```bash
cd ~
curl -O https://beta.quicklisp.org/quicklisp.lisp
sbcl --load quicklisp.lisp \
     --eval "(quicklisp-quickstart:install)" \
     --eval "(ql:add-to-init-file)" \
     --quit
```

#### 4. PostgreSQLã®è¨­å®š

```bash
# postgresãƒ¦ãƒ¼ã‚¶ãƒ¼ã«åˆ‡ã‚Šæ›¿ãˆ
sudo -i -u postgres

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ä½œæˆ
createdb blogdb
createdb lisp_blog_test
createuser bloguser

# psqlã§æ¨©é™è¨­å®š
psql
# psqlå†…ã§å®Ÿè¡Œ:
# ALTER USER bloguser WITH SUPERUSER;
# \q

# å…ƒã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«æˆ»ã‚‹
exit
```

---

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### 1. ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯ã®ä½œæˆ

```bash
# Quicklispã®local-projectsãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯ã‚’ä½œæˆ
ln -s ~/projects/lisp-blog ~/quicklisp/local-projects/lisp-blog

# ã¾ãŸã¯ Roswellã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹å ´åˆ
ln -s ~/projects/lisp-blog ~/.roswell/local-projects/lisp-blog
```

### 2. ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
cd ~/projects/lisp-blog
sbcl --eval "(ql:quickload :lisp-blog)" --quit
```

---

## å®Ÿè¡Œæ–¹æ³•

### 1. ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•

```bash
cd ~/projects/lisp-blog
sbcl --load main.lisp
```

ã‚µãƒ¼ãƒãƒ¼ã¯ `http://localhost:5000` ã§èµ·å‹•ã—ã¾ã™ã€‚

### 2. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•ï¼ˆPhase 5å®Ÿè£…å¾Œï¼‰

åˆ¥ã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ï¼š

```bash
cd ~/projects/lisp-blog/frontend
npm install
npm run dev
```

é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã¯ `http://localhost:5173` ã§èµ·å‹•ã—ã¾ã™ã€‚

### 3. ã‚µãƒ¼ãƒãƒ¼ã®åœæ­¢

ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ `Ctrl+C` ã‚’æŠ¼ã™ã¨ã‚µãƒ¼ãƒãƒ¼ãŒåœæ­¢ã—ã¾ã™ã€‚

---

## REPLå†…ã§ã®å®Ÿè¡Œï¼ˆé–‹ç™ºæ™‚ï¼‰

é–‹ç™ºä¸­ã¯ã€REPLã‚’ä½¿ã£ã¦å¯¾è©±çš„ã«å®Ÿè¡Œã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ï¼š

```bash
sbcl
```

REPLå†…ã§ï¼š

```lisp
(load "~/quicklisp/setup.lisp")
(ql:quickload :lisp-blog)
(in-package :lisp-blog)

;; ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åˆæœŸåŒ–ï¼ˆåˆå›ã®ã¿ï¼‰
(lisp-blog.db:ensure-tables-exist)

;; ã‚µãƒ¼ãƒãƒ¼èµ·å‹•
(lisp-blog.main:start :port 5000)

;; ã‚µãƒ¼ãƒãƒ¼åœæ­¢
(lisp-blog.main:stop)
```

---

## ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

### å…¨ãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œ

```bash
./run-tests.sh
```

### ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆè©³ç´°

- **Phase 4.1**: ãƒ†ã‚¹ãƒˆç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼ˆ2ãƒ†ã‚¹ãƒˆï¼‰
- **Phase 4.2**: ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°ãƒ†ã‚¹ãƒˆï¼ˆ106ãƒ†ã‚¹ãƒˆï¼‰
- **Phase 4.3**: ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«ãƒ†ã‚¹ãƒˆï¼ˆ62ãƒ†ã‚¹ãƒˆï¼‰
- **Phase 4.4**: ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ãƒ†ã‚¹ãƒˆï¼ˆ91ãƒ†ã‚¹ãƒˆï¼‰
- **Phase 4.5**: ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ãƒ†ã‚¹ãƒˆï¼ˆ46ãƒ†ã‚¹ãƒˆï¼‰

**åˆè¨ˆ**: 307ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ï¼ˆ100%æˆåŠŸç‡ï¼‰

---

## ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ“ä½œ

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ãƒªã‚»ãƒƒãƒˆ

```bash
# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’å‰Šé™¤ã—ã¦å†ä½œæˆ
dropdb blogdb
dropdb lisp_blog_test
createdb blogdb
createdb lisp_blog_test

# ã¾ãŸã¯ã€ãƒ†ãƒ¼ãƒ–ãƒ«ã®ã¿å‰Šé™¤
psql blogdb -c "DROP TABLE IF EXISTS sessions, posts, users CASCADE;"
```

ãã®å¾Œã€å†åº¦ `(lisp-blog.db:ensure-tables-exist)` ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ç¢ºèª

```bash
# PostgreSQLã«æ¥ç¶š
psql blogdb

# ãƒ†ãƒ¼ãƒ–ãƒ«ä¸€è¦§ã‚’è¡¨ç¤º
\dt

# usersãƒ†ãƒ¼ãƒ–ãƒ«ã®å†…å®¹ã‚’è¡¨ç¤º
SELECT * FROM users;

# postsãƒ†ãƒ¼ãƒ–ãƒ«ã®å†…å®¹ã‚’è¡¨ç¤º
SELECT * FROM posts;

# çµ‚äº†
\q
```

### Redisã‚»ãƒƒã‚·ãƒ§ãƒ³ã®ç¢ºèª

```bash
# Redis CLIã«æ¥ç¶š
redis-cli

# å…¨ã‚­ãƒ¼ã®è¡¨ç¤º
KEYS *

# ã‚»ãƒƒã‚·ãƒ§ãƒ³è©³ç´°ã®ç¢ºèª
HGETALL session:<session-id>

# çµ‚äº†
exit
```

---

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### PostgreSQLæ¥ç¶šã‚¨ãƒ©ãƒ¼

```
Database error: could not connect to server
```

**è§£æ±ºæ–¹æ³•:**

1. PostgreSQLãŒèµ·å‹•ã—ã¦ã„ã‚‹ã‹ç¢ºèªï¼š

```bash
# macOS
brew services list | grep postgresql

# Ubuntu
sudo systemctl status postgresql
```

2. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒä½œæˆã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèªï¼š

```bash
psql -l  # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ä¸€è¦§
psql -U bloguser -d blogdb  # æ¥ç¶šãƒ†ã‚¹ãƒˆ
```

3. æ¥ç¶šæƒ…å ±ã‚’ç¢ºèªï¼š`src/config.lisp` ã® `*database*` ã‚’ç¢ºèª

### Redisæ¥ç¶šã‚¨ãƒ©ãƒ¼

```
Redis connection error
```

**è§£æ±ºæ–¹æ³•:**

```bash
# macOS
brew services list | grep redis

# Ubuntu
sudo systemctl status redis-server

# Redisã®å†èµ·å‹•
# macOS
brew services restart redis

# Ubuntu
sudo systemctl restart redis-server
```

### ãƒãƒ¼ãƒˆä½¿ç”¨ä¸­ã‚¨ãƒ©ãƒ¼

```
Error: Address already in use
```

**è§£æ±ºæ–¹æ³•:**

```bash
# ä½¿ç”¨ä¸­ã®ãƒãƒ¼ãƒˆã‚’ç¢ºèª
lsof -i :5000

# ãƒ—ãƒ­ã‚»ã‚¹ã‚’çµ‚äº†
kill -9 <PID>
```

### QuicklispãŒã‚·ã‚¹ãƒ†ãƒ ã‚’è¦‹ã¤ã‘ã‚‰ã‚Œãªã„

```
Error: System "lisp-blog" not found
```

**è§£æ±ºæ–¹æ³•:**

```lisp
;; REPLã§å®Ÿè¡Œ
(ql:register-local-projects)
(ql:quickload :lisp-blog)
```

ã¾ãŸã¯ã€ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯ã‚’å†ä½œæˆï¼š

```bash
rm ~/quicklisp/local-projects/lisp-blog
ln -s ~/projects/lisp-blog ~/quicklisp/local-projects/lisp-blog
```

### ãƒ†ã‚¹ãƒˆå¤±æ•—æ™‚

```bash
# ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ã‚¯ãƒªã‚¢ã—ã¦å†å®Ÿè¡Œ
./clean-cache.sh -y
./run-tests.sh
```

---

## APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

### èªè¨¼API

#### POST /api/auth/register
ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ:**
```json
{
  "username": "testuser",
  "password": "password123"
}
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹:**
```json
{
  "id": 1,
  "username": "testuser"
}
```

#### POST /api/auth/login
ãƒ­ã‚°ã‚¤ãƒ³

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ:**
```json
{
  "username": "testuser",
  "password": "password123"
}
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹:**
```json
{
  "user": {
    "id": 1,
    "username": "testuser"
  }
}
```

#### POST /api/auth/logout
ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹:**
```json
{
  "message": "Logged out successfully"
}
```

#### GET /api/auth/me
ç¾åœ¨ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±å–å¾—

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹:**
```json
{
  "id": 1,
  "username": "testuser",
  "created_at": "2025-10-18T10:00:00Z"
}
```

### æŠ•ç¨¿APIï¼ˆPhase 3å®Ÿè£…äºˆå®šï¼‰

#### POST /api/posts
æŠ•ç¨¿ä½œæˆï¼ˆèªè¨¼å¿…é ˆï¼‰

#### GET /api/posts
æŠ•ç¨¿ä¸€è¦§å–å¾—

**ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿:**
- `user_id`: ç‰¹å®šãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æŠ•ç¨¿ã®ã¿å–å¾—
- `published`: å…¬é–‹æ¸ˆã¿æŠ•ç¨¿ã®ã¿ï¼ˆtrue/falseï¼‰

#### GET /api/posts/:id
æŠ•ç¨¿è©³ç´°å–å¾—

#### PUT /api/posts/:id
æŠ•ç¨¿æ›´æ–°ï¼ˆèªè¨¼å¿…é ˆã€ä½œæˆè€…ã®ã¿ï¼‰

#### DELETE /api/posts/:id
æŠ•ç¨¿å‰Šé™¤ï¼ˆèªè¨¼å¿…é ˆã€ä½œæˆè€…ã®ã¿ï¼‰

#### PUT /api/posts/:id/publish
ä¸‹æ›¸ãã‚’å…¬é–‹ï¼ˆèªè¨¼å¿…é ˆã€ä½œæˆè€…ã®ã¿ï¼‰

#### PUT /api/posts/:id/unpublish
å…¬é–‹è¨˜äº‹ã‚’ä¸‹æ›¸ãã«æˆ»ã™ï¼ˆèªè¨¼å¿…é ˆã€ä½œæˆè€…ã®ã¿ï¼‰

---

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ

```
lisp-blog/
â”œâ”€â”€ lisp-blog.asd          # ã‚·ã‚¹ãƒ†ãƒ å®šç¾©ï¼ˆä¾å­˜é–¢ä¿‚ã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«é †åºï¼‰
â”œâ”€â”€ main.lisp              # ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â”œâ”€â”€ setup-cache.lisp       # FASLã‚­ãƒ£ãƒƒã‚·ãƒ¥è¨­å®š
â”œâ”€â”€ run-tests.sh           # ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”œâ”€â”€ clean-cache.sh         # ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ config.lisp        # è¨­å®šï¼ˆãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã€Redisæ¥ç¶šæƒ…å ±ï¼‰
â”‚   â”œâ”€â”€ db.lisp            # DBæ¥ç¶šç®¡ç†ï¼ˆMito + ã‚³ãƒã‚¯ã‚·ãƒ§ãƒ³ãƒ—ãƒ¼ãƒ«ï¼‰
â”‚   â”œâ”€â”€ web.lisp           # Caveman2ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
â”‚   â”œâ”€â”€ main.lisp          # ã‚µãƒ¼ãƒãƒ¼èµ·å‹•ãƒ»åœæ­¢
â”‚   â”œâ”€â”€ util/
â”‚   â”‚   â”œâ”€â”€ crypto.lisp    # ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒãƒƒã‚·ãƒ¥åŒ–ã€ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
â”‚   â”‚   â””â”€â”€ json.lisp      # JSONãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ˜ãƒ«ãƒ‘ãƒ¼
â”‚   â”œâ”€â”€ model/
â”‚   â”‚   â”œâ”€â”€ user.lisp      # Userãƒ¢ãƒ‡ãƒ«ï¼ˆCRUDæ“ä½œï¼‰
â”‚   â”‚   â””â”€â”€ post.lisp      # Postãƒ¢ãƒ‡ãƒ«ï¼ˆCRUDæ“ä½œã€ä¸‹æ›¸ãæ©Ÿèƒ½ï¼‰
â”‚   â”œâ”€â”€ middleware/
â”‚   â”‚   â””â”€â”€ session.lisp   # Redisã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†
â”‚   â”œâ”€â”€ service/
â”‚   â”‚   â”œâ”€â”€ auth.lisp      # èªè¨¼ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯
â”‚   â”‚   â””â”€â”€ post.lisp      # æŠ•ç¨¿ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯
â”‚   â””â”€â”€ handler/
â”‚       â”œâ”€â”€ auth.lisp      # èªè¨¼APIãƒãƒ³ãƒ‰ãƒ©ãƒ¼
â”‚       â””â”€â”€ post.lisp      # æŠ•ç¨¿APIãƒãƒ³ãƒ‰ãƒ©ãƒ¼
â”œâ”€â”€ test/
â”‚   â”œâ”€â”€ setup.lisp         # ãƒ†ã‚¹ãƒˆç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
â”‚   â”œâ”€â”€ fixtures.lisp      # ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£
â”‚   â”œâ”€â”€ util/              # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆ
â”‚   â”œâ”€â”€ model/             # ãƒ¢ãƒ‡ãƒ«ãƒ†ã‚¹ãƒˆ
â”‚   â”œâ”€â”€ middleware/        # ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ãƒ†ã‚¹ãƒˆ
â”‚   â”œâ”€â”€ service/           # ã‚µãƒ¼ãƒ“ã‚¹ãƒ†ã‚¹ãƒˆ
â”‚   â””â”€â”€ handler/           # ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ãƒ†ã‚¹ãƒˆ
â”œâ”€â”€ docs/
â”‚   â””â”€â”€ design/
â”‚       â”œâ”€â”€ phase1-mito-migration.md    # Phase 1è¨­è¨ˆæ›¸
â”‚       â”œâ”€â”€ phase2-auth-api.md          # Phase 2è¨­è¨ˆæ›¸
â”‚       â”œâ”€â”€ phase4-fiveam-tests.md      # Phase 4è¨­è¨ˆæ›¸
â”‚       â””â”€â”€ phase5-react-frontend.md    # Phase 5è¨­è¨ˆæ›¸
â””â”€â”€ frontend/              # React 18 + TypeScriptï¼ˆPhase 5å®Ÿè£…äºˆå®šï¼‰
    â”œâ”€â”€ src/
    â”‚   â”œâ”€â”€ api/           # APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
    â”‚   â”œâ”€â”€ components/    # Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
    â”‚   â”œâ”€â”€ pages/         # ãƒšãƒ¼ã‚¸ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
    â”‚   â”œâ”€â”€ hooks/         # ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯
    â”‚   â”œâ”€â”€ types/         # TypeScriptå‹å®šç¾©
    â”‚   â””â”€â”€ utils/         # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°
    â”œâ”€â”€ public/
    â””â”€â”€ index.html
```

---

## é–‹ç™ºãƒ•ãƒ­ãƒ¼

### ãƒ–ãƒ©ãƒ³ãƒæˆ¦ç•¥

Conventional Commits 1.0.0 ã«å¾“ã„ã¾ã™ã€‚

**ãƒ–ãƒ©ãƒ³ãƒå‘½åè¦å‰‡:**
```
<type>/<short-description>

ä¾‹:
feat/password-reset
fix/session-timeout
docs/api-documentation
```

**ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å½¢å¼:**
```
<type>[optional scope]: <description>

ä¾‹:
feat(auth): add password reset functionality
fix(post): validate post title length
docs: update installation guide
```

### é–‹ç™ºã‚µã‚¤ã‚¯ãƒ«

1. **æ©Ÿèƒ½è¿½åŠ å‰**: `docs/design/` ã«è©³ç´°ãªè¨ˆç”»ã‚’è¨˜è¼‰
2. **ä½œæ¥­ä¸­**: æ®µéšçš„ã«å®Ÿè£…ï¼ˆå°ã•ãªã‚¹ãƒ†ãƒƒãƒ—ã«åˆ†å‰²ï¼‰
3. **ä½œæ¥­å®Œäº†å¾Œ**:
   - `PROGRESS.md` ã«è©³ç´°ãªè¨˜éŒ²ï¼ˆéå…¬é–‹ï¼‰
   - `CHANGELOG.md` ã«å…¬é–‹ç”¨ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆ

---

## ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

### ãƒãƒ¼ãƒˆç•ªå·ã®å¤‰æ›´

`main.lisp` ã‚’ç·¨é›†ï¼š

```lisp
(lisp-blog.main:start :port 3000)  ;; ä»»æ„ã®ãƒãƒ¼ãƒˆç•ªå·
```

### ã‚»ãƒƒã‚·ãƒ§ãƒ³æœ‰åŠ¹æœŸé™ã®å¤‰æ›´

`src/middleware/session.lisp` ã‚’ç·¨é›†ï¼š

```lisp
(defparameter *session-ttl* (* 7 24 60 60))  ;; 7æ—¥é–“ï¼ˆç§’å˜ä½ï¼‰
```

### æ©Ÿèƒ½æ‹¡å¼µå€™è£œ

- ã‚³ãƒ¡ãƒ³ãƒˆæ©Ÿèƒ½
- ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
- ã‚¿ã‚°æ©Ÿèƒ½
- æ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°æ©Ÿèƒ½
- ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç·¨é›†
- ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒªã‚»ãƒƒãƒˆ
- ãƒ¡ãƒ¼ãƒ«é€šçŸ¥

---

## ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

### å®Ÿè£…æ¸ˆã¿å¯¾ç­–

- âœ… **SQLã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³å¯¾ç­–**: ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿åŒ–ã‚¯ã‚¨ãƒªä½¿ç”¨
- âœ… **ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ä¿è­·**: PBKDF2ãƒãƒƒã‚·ãƒ¥åŒ–ï¼ˆ100,000å›åå¾©ï¼‰
- âœ… **XSSå¯¾ç­–**: å…¥åŠ›ã‚µãƒ‹ã‚¿ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³
- âœ… **ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†**: Redis + HttpOnly Cookie
- âœ… **å…¥åŠ›ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³**: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã§å³å¯†ãªãƒã‚§ãƒƒã‚¯

### æœ¬ç•ªç’°å¢ƒå‘ã‘è¿½åŠ å¯¾ç­–ï¼ˆæœªå®Ÿè£…ï¼‰

- âš ï¸ HTTPS ã®ä½¿ç”¨ï¼ˆLet's Encryptç­‰ï¼‰
- âš ï¸ CSRFå¯¾ç­–ï¼ˆãƒˆãƒ¼ã‚¯ãƒ³æ¤œè¨¼ï¼‰
- âš ï¸ ãƒ¬ãƒ¼ãƒˆåˆ¶é™ï¼ˆãƒ–ãƒ«ãƒ¼ãƒˆãƒ•ã‚©ãƒ¼ã‚¹æ”»æ’ƒå¯¾ç­–ï¼‰
- âš ï¸ CORSè¨­å®šã®å³å¯†åŒ–
- âš ï¸ ãƒ­ã‚®ãƒ³ã‚°ã¨ç›£è¦–
- âš ï¸ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—

---

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT License

---

## é–‹ç™ºè€…å‘ã‘æƒ…å ±

### ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç®¡ç†

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ¸ˆã¿ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ.faslï¼‰ã‚’ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ã® `.fasl-cache/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ä¿å­˜ã—ã¾ã™ã€‚

**ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®å ´æ‰€:**
```
lisp-blog/.fasl-cache/sbcl-<version>-<platform>/
```

**ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—:**
```bash
# å¯¾è©±ãƒ¢ãƒ¼ãƒ‰ï¼ˆç¢ºèªã‚ã‚Šï¼‰
./clean-cache.sh

# è‡ªå‹•ãƒ¢ãƒ¼ãƒ‰ï¼ˆç¢ºèªãªã—ï¼‰
./clean-cache.sh -y
```

---

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆé€²æ—

### å®Œäº†ãƒ•ã‚§ãƒ¼ã‚º

- âœ… **Phase 1**: Mito + Caveman2 ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
- âœ… **Phase 2**: èªè¨¼APIå®Ÿè£…
- âœ… **Phase 4**: FiveAMãƒ†ã‚¹ãƒˆä½“åˆ¶ç¢ºç«‹ï¼ˆ307ãƒ†ã‚¹ãƒˆï¼‰

### é€²è¡Œä¸­ãƒ•ã‚§ãƒ¼ã‚º

- ğŸ”„ **Phase 5**: React 18 + TypeScript ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£…

### æœªå®Ÿè£…ãƒ•ã‚§ãƒ¼ã‚º

- â³ **Phase 3**: æŠ•ç¨¿APIå®Ÿè£…ï¼ˆCRUD + ä¸‹æ›¸ãæ©Ÿèƒ½ï¼‰

è©³ç´°ã¯ `PROGRESS.md` ã‚’ã”è¦§ãã ã•ã„ã€‚

---

## å‚è€ƒãƒªãƒ³ã‚¯

### Common Lisp
- [SBCL Documentation](http://www.sbcl.org/manual/)
- [Caveman2](https://github.com/fukamachi/caveman)
- [Mito](https://github.com/fukamachi/mito)
- [FiveAM](https://common-lisp.net/project/fiveam/)

### Frontend
- [React 18 Documentation](https://react.dev/)
- [TypeScript Documentation](https://www.typescriptlang.org/)
- [Vite Documentation](https://vitejs.dev/)
- [TanStack Query](https://tanstack.com/query/latest)
- [React Router](https://reactrouter.com/)
- [Tailwind CSS Documentation](https://tailwindcss.com/)

### Database & Cache
- [PostgreSQL Documentation](https://www.postgresql.org/docs/)
- [Redis Documentation](https://redis.io/documentation)
